// User Service
// Version 2.0.0

const API_URL = 'https://api.example.com/v2';
const DEFAULT_TIMEOUT = 5000;

async function getUser(id) {
    const res = await fetch(`${API_URL}/users/${id}`);
    if (!res.ok) throw new Error('User not found');
    return res.json();
}

async function createUser(data) {
    const res = await fetch(`${API_URL}/users`, {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data),
    });
    if (!res.ok) throw new Error('Failed to create user');
    return res.json();
}

function updateUser(id, data) {
    return fetch(`${API_URL}/users/${id}`, {
        method: 'PUT',
        body: JSON.stringify(data),
    }).then(res => res.json());
}

function deleteUser(id) {
    return fetch(`${API_URL}/users/${id}`, {
        method: 'DELETE',
    });
}

// New remote function
async function listUsers(page = 1, limit = 10) {
    const res = await fetch(`${API_URL}/users?page=${page}&limit=${limit}`);
    return res.json();
}

module.exports = {
    getUser,
    createUser,
    updateUser,
    deleteUser,
    listUsers,
};
